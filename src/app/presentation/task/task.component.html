<header>
  <app-priority [priority]="task().priority" (updated)="prorityChanged.emit($event)"></app-priority>
  <app-icon class="menu-trigger" icon="menu" [menuTriggerFor]="menu"></app-icon>
</header>
<div class="title">{{ task().title }}</div>
<app-author [author]="task().author"></app-author>

<ng-template #menu>
  <ul class="menu">
    <li menuItem class="menu-item" (click)="deleted.emit()">Supprimer</li>
    <li menuItem [menuTriggerFor]="statusMenu" [asChild]="true" class="menu-item">
      Changer le statut
    </li>
  </ul>
</ng-template>

<ng-template #statusMenu>
  <ul class="menu">
    @for (status of availableStatuses(); track status) {
      <li menuItem class="menu-item" (click)="statusChanged.emit(status)">{{ status }}</li>
    }
  </ul>
</ng-template>
